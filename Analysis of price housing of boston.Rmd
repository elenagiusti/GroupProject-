---
title: "Analysisi of price of housing Boston"
author: "Giusti Elena"
date: ""
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
getwd()
setwd("/Users/elena/Desktop/GroupProject")
source("CopyOfAnalyticsLibraries/library.R")
source("CopyOfAnalyticsLibraries/heatmapOutput.R")
```

##This doccument is the result of a Survey among 506 respondent
 This dataset was taken from the StatLib library which is
maintained at Carnegie Mellon University
<br>Number of Instances: 506                
<br>   Number of Attributes: 13 continuous attributes (including "class"
attribute "MEDV"), 1 binary-valued attribute 

<br1. CRIM      per capita crime rate by town
    2. ZN        proportion of residential land zoned for lots over 
                 25,000 sq.ft.
    3. INDUS     proportion of non-retail business acres per town
    4. CHAS      Charles River dummy variable (= 1 if tract bounds 
                 river; 0 otherwise)
    5. NOX       nitric oxides concentration (parts per 10 million)
    6. RM        average number of rooms per dwelling
    7. AGE       proportion of owner-occupied units built prior to 1940
    8. DIS       weighted distances to five Boston employment centres
    9. RAD       index of accessibility to radial highways
    10. TAX      full-value property-tax rate per $10,000
    11. PTRATIO  pupil-teacher ratio by town
    12. B        1000(Bk - 0.63)^2 where Bk is the proportion of blacks 
                 by town
    13. LSTAT    % lower status of the population
    14. MEDV     Median value of owner-occupied homes in $1000's
    
    
    Target variable to predict: pricing of house MEDIAN
    
```{r 

myData <- read.csv(file = "/DATA/housing.data.csv", header = TRUE, sep=";")

View(myData, header=FALSE)
Price_of_Houses <- housing.data[,14]
ID<-c(1:506)
MyDataID <-cbind(ID,myData)
plot(MyDataID[,c(1,14)])
summary(MyDataID[,14])

```


####Questions

<br>1.What are the main factors that influence the price of house in Boston?
<br>2.Which are the main cluster of houses that can be identify?
<br>3.What is the best prediction of the relative importance of those factors?


## Step 1: Confirm data is metric

```{r, echo=FALSE}

ProjectData=data.matrix(MyDataID) 
MIN_VALUE=0.5
max_data_report = 10
colnames(ProjectData)

factor_attributes_used= c(1:15)

# Please ENTER the selection criterions for the factors to use. 
# Choices: "eigenvalue", "variance", "manual"
factor_selectionciterion = "eigenvalue"

# Please ENTER the desired minumum variance explained 
# (ONLY USED in case "variance" is the factor selection criterion used). 
minimum_variance_explained = 65  # between 1 and 100

# Please ENTER the number of factors to use 
# (ONLY USED in case "manual" is the factor selection criterion used).
manual_numb_factors_used = 2

# Please ENTER the rotation eventually used (e.g. "none", "varimax", "quatimax", "promax", "oblimin", "simplimax", and "cluster" - see help(principal)). Defauls is "varimax"
rotation_used="varimax"

factor_attributes_used = unique(sapply(factor_attributes_used,function(i) min(ncol(ProjectData), max(i,1))))
ProjectDataFactor=ProjectData[,factor_attributes_used]
ProjectDataFactor <- ProjectData <- data.matrix(ProjectDataFactor)
```

## Step 1: Confirm data is metric

```{r}
knitr::kable(round(my_summary(ProjectDataFactor), 2))

```
## Step 2: Scale the  data
```{r, echo=TRUE, tidy=TRUE}
ProjectDatafactor_scaled=apply(ProjectDataFactor,2, function(r) {if (sd(r)!=0) res=(r-mean(r))/sd(r) else res=0*r; res})
```
Notice now the summary statistics of the scaled dataset:

```{r}
knitr::kable(round(my_summary(ProjectDatafactor_scaled), 2))
```

## Step 3:  Check correlations 
Check for correlation

```{r}
thecor = round(cor(ProjectDataFactor),2)
colnames(thecor)<-colnames(ProjectDataFactor)
rownames(thecor)<-colnames(ProjectDataFactor)

knitr::kable(round(thecor,2))
```